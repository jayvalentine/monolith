parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"iJlX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function n(){}return n.interval=function(n,r){return Math.floor(Math.random()*(r-n+1))+n},n.choice=function(r){return r[n.interval(0,r.length-1)]},n.chance=function(n){return Math.random()<n},n.progressiveChance=function(n,r,t){var e=Math.min(r*n,t);return Math.random()<e},n}();exports.Random=n;
},{}],"oXG4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.allocate=function(r){e.ids.hasOwnProperty(r)||(e.ids[r]=0);var t=r+"-"+e.ids[r];return e.ids[r]++,t},e.ids={},e}();exports.IDAllocator=e;
},{}],"azeZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});for(var t=require("./random"),e=[],i=0;i<26;i++)e[i]=String.fromCharCode(97+i);var n=["a","e","i","o","u"],o=e.filter(function(t,e,i){return-1==n.indexOf(t)}),r=function(){return function(t,e){this.suffix=t,this.optional=e}}(),a=function(){return function(t,e,i,n){this.base=t,this.plural=e,this.genitive=i,this.adjectives=n}}();exports.Noun=a;var s=function(){function e(){this.plural=e.getSuffix(),this.genitive=e.getSuffix(),this.adjective=e.getSuffix(),t.Random.chance(.5)?this.adjectivePolicy=e.Position.Before:this.adjectivePolicy=e.Position.After,this.translations={}}return e.capitalize=function(t){var e=t.slice(1);return t.charAt(0).toUpperCase()+e},e.toTitle=function(t){return t.split(" ").map(e.capitalize).join(" ")},e.getSuffix=function(){var e=t.Random.choice(n),i=t.Random.choice(o)+t.Random.choice(n);return new r(i,e)},e.addSuffix=function(t,e){return o.indexOf(t[t.length-1])>-1&&(t+=e.optional),t+=e.suffix},e.prototype.translate=function(t){for(var i=[],n=0,o=t;n<o.length;n++){var r=o[n],a=this.translateWord(r.base);r.plural&&(a=e.addSuffix(a,this.plural)),r.genitive&&(a=e.addSuffix(a,this.genitive));for(var s=[],f=0,u=r.adjectives;f<u.length;f++){var c=u[f],h=this.translateWord(c);h=e.addSuffix(h,this.adjective),s.push(h)}this.adjectivePolicy==e.Position.Before&&(i=i.concat(s)),i.push(a),this.adjectivePolicy==e.Position.After&&(i=i.concat(s))}return i.join(" ")},e.prototype.translateWord=function(t){for(var e=[],i="",r=0,a=t.split("");r<a.length;r++){var s=a[r];if(i.length>0){var f=i[i.length-1];n.indexOf(f)>-1?(e.push(i),i=""):o.indexOf(f)>-1&&o.indexOf(s)>-1&&f!=s&&(e.push(i),i="")}i+=s}i.length>0&&e.push(i);for(var u="",c=0,h=e;c<h.length;c++){var l=h[c];u+=this.translatePhoneme(l)}return u},e.prototype.translatePhoneme=function(e){if(!this.translations.hasOwnProperty(e)){for(var i="",r=0,a=e.split("");r<a.length;r++){var s=a[r];o.indexOf(s)>-1?i+=t.Random.choice(o):i+=t.Random.choice(n)}this.translations[e]=i}return this.translations[e]},e}();exports.Language=s,function(t){!function(t){t.Before="Before",t.After="After"}(t.Position||(t.Position={}))}(s=exports.Language||(exports.Language={})),exports.Language=s;
},{"./random":"iJlX"}],"u4WM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./random"),e=require("./idallocator"),o=require("./language"),i=function(){function i(i){this.id=e.IDAllocator.allocate("tribe"),this._population=i,this._migrationChance=1e-6,this._eventProgress={},this._relations={},this._technology=[],this._culture=[],this._name=[],this.attitudes=new r,this.attitudes.monolith=r.Monolith.Unencountered,this.dead=!1,this.attitudes.others=t.Random.choice([r.Others.Aggressive,r.Others.Defensive,r.Others.Diplomatic,r.Others.Insular]),this.attitudes.world=t.Random.choice([r.World.Exploit,r.World.Explore,r.World.Harmony,r.World.Survival]),this.attitudes.self=t.Random.choice([r.Self.Hierarchical,r.Self.Egalitarian]),this._language=new o.Language}return i.prototype.population=function(){return this._population},i.prototype.decreasePopulation=function(t){this._population-=t},i.prototype.increasePopulation=function(t){this._population+=t},i.prototype.grow=function(){this.population();for(var e=0,o=0,i=this.growthRate(),r=this.deathRate(),n=0;n<20;n++)t.Random.chance(i)&&(e+=Math.floor(.05*this.population())),t.Random.chance(r)&&(o+=Math.floor(.05*this.population()));this.increasePopulation(e),this.decreasePopulation(o)},i.prototype.split=function(t){for(var e=[],o=[],r=0,n=t;r<n.length;r++){var s=n[r];e.push(Math.floor(this._population*s))}for(var a=0,u=e.slice(1);a<u.length;a++){var h=new i(s=u[a]);h.attitudes.monolith=this.attitudes.monolith,h.attitudes.others=this.attitudes.others,h.attitudes.world=this.attitudes.world,h.attitudes.self=this.attitudes.self;for(var l=0,c=this._technology;l<c.length;l++){var p=c[l];h.addTechnology(p)}for(var d=0,g=this._culture;d<g.length;d++){var f=g[d];h.addCulture(f)}h.setMigrationChance(this._migrationChance),o.push(h)}return this._population=Math.floor(t[0]*this._population),o},i.prototype.relationship=function(t){return this._relations.hasOwnProperty(t.id)?this._relations[t.id]:0},i.prototype.changeRelationship=function(t,e){this._relations.hasOwnProperty(t.id)||(this._relations[t.id]=0),this._relations[t.id]+=e,console.log("Set relationship of "+this.id+" for "+t.id+" to "+this._relations[t.id]+".")},i.prototype.attack=function(){var t=0;return this.attitudes.others==r.Others.Aggressive&&(t+=1),this.hasTechnology("tools")&&(t+=1),t},i.prototype.defense=function(){var t=0;return this.attitudes.others==r.Others.Defensive&&(t+=1),this.hasTechnology("construction")&&(t+=1),t},i.prototype.migrate=function(){return t.Random.chance(this._migrationChance)},i.prototype.setMigrationChance=function(t){this._migrationChance=t},i.prototype.progress=function(t){return this._eventProgress[t.id]},i.prototype.increaseProgress=function(t,e){var o=0;this._eventProgress.hasOwnProperty(t.id)&&(o=this._eventProgress[t.id]),this._eventProgress[t.id]=o+e},i.prototype.resetProgress=function(t){this._eventProgress[t.id]=0},i.prototype.addTechnology=function(t){this._technology.indexOf(t)>-1||this._technology.push(t)},i.prototype.removeTechnology=function(t){var e=this._technology.indexOf(t);-1!=e&&this._technology.splice(e,1)},i.prototype.hasTechnology=function(t){return this._technology.indexOf(t)>-1},i.prototype.addCulture=function(t){this._culture.indexOf(t)>-1||this._culture.push(t)},i.prototype.removeCulture=function(t){var e=this._culture.indexOf(t);-1!=e&&this._culture.splice(e,1)},i.prototype.hasCulture=function(t){return this._culture.indexOf(t)>-1},i.prototype.title=function(){return 0==this._name.length?"a tribe":"the "+o.Language.toTitle(this._language.translate(this._name))},i.prototype.titleCapitalized=function(){return 0==this._name.length?"A tribe":"The "+o.Language.toTitle(this._language.translate(this._name))},i.prototype.setName=function(t){this._name=t},i.prototype.name=function(){return this._name},i.prototype.language=function(){return this._language},i.prototype.growthRate=function(){var t=1e-4;return this.hasTechnology("fire")&&(t*=4),this.hasTechnology("agriculture")&&(t*=4),t},i.prototype.deathRate=function(){return 1e-4},i}();exports.Tribe=i;var r=function(){function t(){}return t.MonolithString=function(e){switch(e){case t.Monolith.Unencountered:return"unencountered";case t.Monolith.Curious:return"curious";case t.Monolith.Superstitious:return"superstitious";case t.Monolith.Fearful:return"fearful"}},t.OthersString=function(e){switch(e){case t.Others.Aggressive:return"aggressive";case t.Others.Defensive:return"defensive";case t.Others.Diplomatic:return"diplomatic";case t.Others.Insular:return"insular"}},t.WorldString=function(e){switch(e){case t.World.Exploit:return"exploitative";case t.World.Explore:return"explorative";case t.World.Harmony:return"harmonious";case t.World.Survival:return"survivalists"}},t.SelfString=function(e){switch(e){case t.Self.Hierarchical:return"hierarchical";case t.Self.Egalitarian:return"egalitarian"}},t.prototype.monolithString=function(){return t.MonolithString(this.monolith)},t.prototype.othersString=function(){return t.OthersString(this.others)},t.prototype.worldString=function(){return t.WorldString(this.world)},t.prototype.selfString=function(){return t.SelfString(this.self)},t}();exports.Attitudes=r,function(t){!function(t){t.Unencountered="unencountered",t.Curious="curious",t.Superstitious="superstitious",t.Fearful="fearful"}(t.Monolith||(t.Monolith={})),function(t){t.Aggressive="aggressive",t.Defensive="defensive",t.Diplomatic="diplomatic",t.Insular="insular"}(t.Others||(t.Others={})),function(t){t.Exploit="exploit",t.Explore="explore",t.Harmony="harmony",t.Survival="survival"}(t.World||(t.World={})),function(t){t.Hierarchical="hierarchical",t.Egalitarian="egalitarian"}(t.Self||(t.Self={}))}(r=exports.Attitudes||(exports.Attitudes={})),exports.Attitudes=r;
},{"./random":"iJlX","./idallocator":"oXG4","./language":"azeZ"}],"TwuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./random"),t=require("./tribe"),o=function(){function o(){}return o.triggers=function(t,o,n){return!(!t.hasTechnology("fire")||!t.hasTechnology("construction"))&&(t.hasCulture("cautious")?e.Random.chance(1e-6):e.Random.chance(3e-5))},o.progress=function(e,t){return 0},o.isChoice=function(){return!0},o.choices=function(e){return["They are being punished.","This is a learning experience."]},o.choicePrompt=function(e){return"One day, while a member of "+e.title()+" is cooking with fire, the roof of their home\n    catches alight. Before long, multiple buildings are in flames. The tribespeople desperately try\n    to put out the fire, and succeed, but not before it has caused significant damage."},o.outcomeMessages=function(e,t){return["The tribe sees this as a punishment, but for what, they are not sure.","The tribe has suffered heavy losses, but finds the strength to continue, and learn how to control the fire better."]},o.outcomeFunctions=function(o,n){return[function(){e.Random.chance(.2)?o.attitudes.monolith=t.Attitudes.Monolith.Superstitious:o.attitudes.monolith=t.Attitudes.Monolith.Fearful,o.addCulture("disastersArePunishment");var n=o.population(),i=Math.floor(.3*n),r=Math.floor(.7*n);o.decreasePopulation(e.Random.interval(i,r)),console.log("New population: "+o.population())},function(){e.Random.chance(.5)?o.attitudes.monolith=t.Attitudes.Monolith.Curious:o.attitudes.monolith=t.Attitudes.Monolith.Fearful;var n=o.population(),i=Math.floor(.3*n),r=Math.floor(.7*n);o.decreasePopulation(e.Random.interval(i,r)),o.addCulture("cautious"),console.log("New population: "+o.population())}]},o.id="FireSpreadsEvent",o}();exports.FireSpreadsEvent=o;var n=function(){function o(){}return o.triggers=function(t,o,n){if(!t.hasTechnology("agriculture"))return!1;switch(o.water()){case 0:return e.Random.chance(5e-4);case 1:return e.Random.chance(1e-4);case 2:return e.Random.chance(5e-5);default:return!1}},o.progress=function(e,t){return 0},o.isChoice=function(){return!0},o.choices=function(e){return["They are being punished.","They must leave this barren place.","They must abandon their farms and hunt for food instead."]},o.choicePrompt=function(e){return"There have not been any rains in the region for some time, and the crops\n    of "+e.title()+" are suffering for it. It looks as though there will not be a harvest this year."},o.outcomeMessages=function(e,t){var o=[];return e.hasCulture("disastersArePunishment")?o.push("The tribe sees this as a sign of your displeasure.\n        They begin praying in the hope that it will alleviate the drought,\n        but it does not."):o.push("The tribe sees this as some kind of punishment, but for what, they are not sure."),o.push("The tribe moves on from the region, leaving their farms behind."),o.push("The tribe abandons agriculture, and transitions back to a hunter-gatherer society."),o},o.outcomeFunctions=function(o,n){return[function(){e.Random.chance(.2)?o.attitudes.monolith=t.Attitudes.Monolith.Superstitious:o.attitudes.monolith=t.Attitudes.Monolith.Fearful,o.addCulture("disastersArePunishment");var n=o.population(),i=Math.floor(.6*n),r=Math.floor(.9*n);o.decreasePopulation(e.Random.interval(i,r)),console.log("New population: "+o.population())},function(){var t=n.nearby(),i=e.Random.choice(t);n.removeTribe(o),i.addTribe(o);var r=o.population(),a=Math.floor(.6*r),u=Math.floor(.9*r);o.decreasePopulation(e.Random.interval(a,u)),console.log("New population: "+o.population())},function(){o.addCulture("abandonedAgriculture"),o.removeTechnology("agriculture");var t=o.population(),n=Math.floor(.6*t),i=Math.floor(.9*t);o.decreasePopulation(e.Random.interval(n,i)),console.log("New population: "+o.population())}]},o.id="DroughtEvent",o}();exports.DroughtEvent=n;var i=function(){function o(){}return o.triggers=function(t,o,n){return!t.hasTechnology("vaccines")&&(!(t.population()<1e3)&&(t.hasTechnology("medicine")?e.Random.chance(.001):e.Random.chance(.005)))},o.progress=function(e,t){return 0},o.isChoice=function(){return!1},o.choices=function(e){return[]},o.choicePrompt=function(e){return""},o.outcomeMessages=function(e,o){var n="With the population of "+e.title()+" growing rapidly, disease is commonplace in their settlement.\n        Before long, a plague spreads among the tribespeople, killing a significant number of them.";return e.hasCulture("disastersArePunishment")?n+=" Many in the tribe see this as a punishment for their sins, and pray to you for forgiveness.":e.attitudes.monolith==t.Attitudes.Monolith.Curious&&(n+=" Some of the tribespeople are committed to finding a way to avoid plagues like this in the future."),[n]},o.outcomeFunctions=function(o,n){return[function(){var n=o.population(),i=Math.floor(.7*n),r=Math.floor(.95*n);o.decreasePopulation(e.Random.interval(i,r)),console.log("New population: "+o.population()),o.attitudes.monolith==t.Attitudes.Monolith.Curious&&o.addCulture("earlyScientists")}]},o.id="PlagueEvent",o}();exports.PlagueEvent=i;
},{"./random":"iJlX","./tribe":"u4WM"}]},{},["TwuV"], null)
//# sourceMappingURL=tribe_events_disasters.aa74be3a.js.map